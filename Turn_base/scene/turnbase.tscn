[gd_scene load_steps=25 format=3 uid="uid://cyrcq42u8wlg0"]

[ext_resource type="Script" path="res://Turn_base/script/turnbase.gd" id="1_nca5i"]
[ext_resource type="Texture2D" uid="uid://xs66x1qjgthp" path="res://Asset/bg3.png" id="2_6go6v"]
[ext_resource type="FontFile" uid="uid://c3g1lh6pf4u6q" path="res://Font/BLOODY.ttf" id="3_5l7e1"]
[ext_resource type="Texture2D" uid="uid://c0jy7wpg685bd" path="res://Asset/dragon.png" id="3_fmmpb"]
[ext_resource type="Texture2D" uid="uid://b7nak02xt6xld" path="res://Asset/bg5.png" id="3_ftlao"]
[ext_resource type="Texture2D" uid="uid://cp8sayct135jn" path="res://Asset/btn_atk.png" id="5_3sdf5"]
[ext_resource type="Texture2D" uid="uid://cdljqay6ulrt8" path="res://Asset/btn_press_atk.png" id="6_frumh"]
[ext_resource type="Texture2D" uid="uid://y0wkciog2beh" path="res://Asset/btn_run.png" id="7_fsi0o"]
[ext_resource type="Texture2D" uid="uid://rdtndsotr0jj" path="res://Asset/btn_press_run.png" id="8_vgb5y"]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_5ge6n"]
bg_color = Color(0.6, 0.6, 0.6, 0)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_4asnp"]
bg_color = Color(0, 0, 0, 1)
border_width_left = 2
border_width_top = 2
border_width_right = 2
border_width_bottom = 2
border_color = Color(0, 0, 0, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_0inlu"]
bg_color = Color(1, 0.141176, 0.141176, 1)
border_width_left = 2
border_width_top = 2
border_width_right = 2
border_width_bottom = 2
border_color = Color(0, 0, 0, 1)

[sub_resource type="StyleBoxTexture" id="StyleBoxTexture_hwdsw"]
texture = ExtResource("5_3sdf5")

[sub_resource type="StyleBoxTexture" id="StyleBoxTexture_6o5a4"]
texture = ExtResource("6_frumh")

[sub_resource type="StyleBoxTexture" id="StyleBoxTexture_l2a2e"]
texture = ExtResource("6_frumh")

[sub_resource type="StyleBoxTexture" id="StyleBoxTexture_343yw"]
texture = ExtResource("6_frumh")

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_x7mjj"]
bg_color = Color(0.6, 0.6, 0.6, 0)

[sub_resource type="StyleBoxTexture" id="StyleBoxTexture_rkkxh"]
texture = ExtResource("7_fsi0o")

[sub_resource type="StyleBoxTexture" id="StyleBoxTexture_k1gho"]
texture = ExtResource("8_vgb5y")

[sub_resource type="StyleBoxTexture" id="StyleBoxTexture_h3w54"]
texture = ExtResource("8_vgb5y")

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_ehivw"]
bg_color = Color(0.6, 0.6, 0.6, 0)

[sub_resource type="Animation" id="Animation_ojmoh"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Enemy:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0.1),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 1)]
}

[sub_resource type="Animation" id="Animation_4ru1l"]
resource_name = "enemy_get_damge"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Enemy:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.2, 0.4, 0.7, 1),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1),
"update": 0,
"values": [Color(1, 1, 1, 1), Color(1, 0, 0, 0), Color(1, 1, 1, 1), Color(1, 0, 0, 0), Color(1, 1, 1, 1)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_2pdjy"]
_data = {
"RESET": SubResource("Animation_ojmoh"),
"enemy_get_damge": SubResource("Animation_4ru1l")
}

[node name="Turnbase" type="Control"]
custom_minimum_size = Vector2(648, 648)
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = 100.0
offset_bottom = -404.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("1_nca5i")
list_boss = ["res://Enemy/Boss/dragon.tres"]

[node name="Background" type="TextureRect" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("2_6go6v")

[node name="Enemy" type="TextureRect" parent="."]
custom_minimum_size = Vector2(50, 50)
layout_mode = 2
offset_left = 193.0
offset_top = 170.0
offset_right = 483.0
offset_bottom = 420.0
texture = ExtResource("3_fmmpb")
expand_mode = 1
stretch_mode = 5

[node name="Background2" type="TextureRect" parent="."]
layout_mode = 2
offset_right = 648.0
offset_bottom = 648.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("3_ftlao")

[node name="Health" type="Label" parent="."]
layout_mode = 0
offset_left = 413.0
offset_top = -70.0
offset_right = 613.0
offset_bottom = -17.0
theme_override_fonts/font = ExtResource("3_5l7e1")
theme_override_font_sizes/font_size = 45
text = "HP 50"

[node name="NameEnemy" type="Label" parent="."]
layout_mode = 0
offset_left = 38.0
offset_top = -70.0
offset_right = 240.0
offset_bottom = -17.0
theme_override_fonts/font = ExtResource("3_5l7e1")
theme_override_font_sizes/font_size = 45
text = "Name"

[node name="Player" type="Panel" parent="."]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.306
anchor_top = 0.696
anchor_right = 0.737
anchor_bottom = 0.918
offset_left = -0.28801
offset_top = -0.00802612
offset_right = 31.424
offset_bottom = 16.136
grow_horizontal = 2
grow_vertical = 0
scale = Vector2(0.9, 0.9)
theme_override_styles/panel = SubResource("StyleBoxFlat_5ge6n")

[node name="Action" type="VBoxContainer" parent="Player"]
layout_mode = 1
anchors_preset = -1
anchor_top = 0.243
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 10.0
offset_top = -36.6578
offset_right = -8.99997
offset_bottom = 2.2222
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/separation = 20

[node name="HealthBar" type="ProgressBar" parent="Player/Action"]
custom_minimum_size = Vector2(0, 20)
layout_mode = 2
theme_override_font_sizes/font_size = 20
theme_override_styles/background = SubResource("StyleBoxFlat_4asnp")
theme_override_styles/fill = SubResource("StyleBoxFlat_0inlu")
step = 1.0
value = 30.0
show_percentage = false

[node name="Attack" type="Button" parent="Player/Action"]
custom_minimum_size = Vector2(0, 70)
layout_mode = 2
size_flags_horizontal = 3
theme_override_font_sizes/font_size = 30
theme_override_styles/normal = SubResource("StyleBoxTexture_hwdsw")
theme_override_styles/hover = SubResource("StyleBoxTexture_6o5a4")
theme_override_styles/pressed = SubResource("StyleBoxTexture_l2a2e")
theme_override_styles/disabled = SubResource("StyleBoxTexture_343yw")
theme_override_styles/focus = SubResource("StyleBoxFlat_x7mjj")

[node name="Time" type="Label" parent="Player/Action/Attack"]
visible = false
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -16.0
offset_top = -26.0
offset_right = 16.0
grow_horizontal = 2
grow_vertical = 0
text = "0.5s"

[node name="cooldown" type="Timer" parent="Player/Action/Attack"]
autostart = true

[node name="Run" type="Button" parent="Player/Action"]
custom_minimum_size = Vector2(0, 70)
layout_mode = 2
size_flags_horizontal = 3
theme_override_font_sizes/font_size = 15
theme_override_styles/normal = SubResource("StyleBoxTexture_rkkxh")
theme_override_styles/hover = SubResource("StyleBoxTexture_k1gho")
theme_override_styles/pressed = SubResource("StyleBoxTexture_h3w54")
theme_override_styles/focus = SubResource("StyleBoxFlat_ehivw")

[node name="TextHere" type="Label" parent="."]
visible = false
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -96.0
offset_top = 176.0
offset_right = 69.0
offset_bottom = 221.0
grow_horizontal = 2
grow_vertical = 2
theme_override_font_sizes/font_size = 30
text = "Text Here!!!"

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_2pdjy")
}

[node name="Timer" type="Timer" parent="."]
one_shot = true

[node name="Enemy_cooldown" type="Timer" parent="."]
one_shot = true

[node name="test" type="Button" parent="."]
visible = false
layout_mode = 0
offset_right = 220.0
offset_bottom = 63.0

[connection signal="pressed" from="Player/Action/Attack" to="." method="_on_attack_pressed"]
[connection signal="timeout" from="Timer" to="." method="_on_timer_timeout"]
[connection signal="timeout" from="Enemy_cooldown" to="." method="_on_enemy_cooldown_timeout"]
[connection signal="pressed" from="test" to="." method="_on_button_pressed"]
